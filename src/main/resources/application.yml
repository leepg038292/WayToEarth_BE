# ê¸°ë³¸ í”„ë¡œíŒŒì¼ ì„¤ì •
spring:
  application:
    name: waytoearth-backend

  profiles:
    active: ${SPRING_PROFILES_ACTIVE:dev}

  config:
    import: 
      - optional:dotenv:.env
      - optional:file:.env

  # OAuth2 ì„¤ì • (ëª¨ë“  í™˜ê²½ ê³µí†µ)
  security:
    oauth2:
      client:
        registration:
          kakao:
            client-id: ${KAKAO_CLIENT_ID}
            redirect-uri: ${KAKAO_REDIRECT_URI}
            authorization-grant-type: authorization_code
            client-authentication-method: POST
            scope:
              - profile_nickname
              - account_email
        provider:
          kakao:
            authorization-uri: https://kauth.kakao.com/oauth/authorize
            token-uri: ${KAKAO_TOKEN_URI}
            user-info-uri: ${KAKAO_USER_INFO_URI}
            user-name-attribute: id

  # Redis ì„¤ì •
  data:
    redis:
      host: ${REDIS_HOST:localhost}
      port: ${REDIS_PORT:6379}
      timeout: 2000ms
      lettuce:
        pool:
          max-active: 8
          max-idle: 8
          min-idle: 0
          max-wait: 2000ms

# ê³µí†µ ì„¤ì •
kakao:
  client-id: ${KAKAO_CLIENT_ID}
  redirect-uri: ${KAKAO_REDIRECT_URI}

# JWT ì„¤ì •
jwt:
  secret: ${JWT_SECRET}
  expiration: ${JWT_EXPIRATION:86400000}

# AWS S3 ì„¤ì • (ê¸°ë³¸ê°’)
cloud:
  aws:
    region: ${AWS_REGION:ap-northeast-2}
    s3:
      bucket: ${S3_BUCKET:waytoearth-assets}  # í™˜ê²½ë³„ë¡œ ì˜¤ë²„ë¼ì´ë“œë¨

# ë‚ ì”¨ API ì„¤ì •
weather:
  openweather:
    api-key: ${OPENWEATHER_API_KEY:}

# OpenAI API ì„¤ì •
openai:
  api-key: ${OPENAI_API_KEY}
  model: ${OPENAI_MODEL:gpt-3.5-turbo}
  max-tokens: ${OPENAI_MAX_TOKENS:800}
  temperature: ${OPENAI_TEMPERATURE:0.7}
  timeout-seconds: ${OPENAI_TIMEOUT:30}
  min-completed-records: ${OPENAI_MIN_RECORDS:5}
  analysis-history-limit: ${OPENAI_HISTORY_LIMIT:10}
  daily-limit-per-user: ${OPENAI_DAILY_LIMIT:10}

# Firebase Cloud Messaging (FCM) ì„¤ì •
fcm:
  firebase:
    config-path: ${FCM_CONFIG_PATH:src/main/resources/firebase/waytoearth-firebase-adminsdk.json}
    config-json: ${FCM_CONFIG_JSON:}
    config-json-base64: ${FCM_CONFIG_JSON_BASE64:}
  notifications:
    enabled: ${FCM_ENABLED:true}
    scheduled:
      morning-time: "0 30 6 * * *"   # ë§¤ì¼ ì˜¤ì „ 6:30 (cron)
      evening-time: "0 0 20 * * *"   # ë§¤ì¼ ì˜¤í›„ 8:00 (cron)
      midnight-time: "0 0/5 0-2 * * *"  # ë§¤ì¼ ìƒˆë²½ 0ì‹œ~2ì‹œ 5ë¶„ ê°„ê²© (cron)
      timezone: "Asia/Seoul"
      morning-message:
        title: "ì¢‹ì€ ì•„ì¹¨ì´ì—ìš”! â˜€ï¸"
        body: "ì˜¤ëŠ˜ë„ ìƒì¾Œí•œ ëŸ¬ë‹ ì–´ë•Œìš”?"
      evening-message:
        title: "í‡´ê·¼ í›„ ëŸ¬ë‹ íƒ€ì„! ğŸƒ"
        body: "ê°€ë²¼ìš´ ëŸ¬ë‹ìœ¼ë¡œ í•˜ë£¨ë¥¼ ë§ˆë¬´ë¦¬í•´ë³´ì„¸ìš”"
      midnight-message:
        title: "ì‹¬ì•¼ ëŸ¬ë‹ íƒ€ì„! ğŸŒ™"
        body: "ìƒˆë²½ì˜ ê³ ìš”í•¨ ì†ì—ì„œ ëŸ¬ë‹í•˜ì„¸ìš”"

# ìºì‹œ ì„¤ì •
cache:
  redis:
    time-to-live: 3600000 # 1ì‹œê°„ (ë°€ë¦¬ì´ˆ)
    key-prefix: "waytoearth:"