# JourneyRoute μ‹μ¤ν… κµ¬ν„ Pull Request

## #οΈβƒ£ μ—°κ΄€ μ΄μ
> Journeyμ— λ―Έλ¦¬ μ •μλ μ§€λ„ κ²½λ΅λ¥Ό μ €μ¥ν•κ³  ν”„λ΅ νΈμ—”λ“μ—μ„ μ΅°νν•  μ μλ” JourneyRoute μ‹μ¤ν… κµ¬ν„

### PR νƒ€μ…(ν•λ‚ μ΄μƒμ PR νƒ€μ…μ„ μ„ νƒν•΄μ£Όμ„Έμ”)
- [x] κΈ°λ¥ μ¶”κ°€
- [ ] κΈ°λ¥ μ‚­μ 
- [ ] λ²„κ·Έ μμ •
- [ ] μμ΅΄μ„±, ν™κ²½ λ³€μ, λΉλ“ κ΄€λ ¨ μ½”λ“ μ—…λ°μ΄νΈ

## π“‹ μ‘μ—… λ‚΄μ©

### 1. β… JourneyRouteEntity μƒμ„±
- Journeyμ™€μ `@ManyToOne` κ΄€κ³„ μ„¤μ •
- μ„λ„(latitude), κ²½λ„(longitude) ν•„λ“ κµ¬ν„
- μμ„(sequence) ν•„λ“λ΅ κ²½λ΅ μμ„ κ΄€λ¦¬
- κ³ λ„(altitude), κµ¬κ°„μ„¤λ…(description) ν™•μ¥ ν•„λ“ μ¶”κ°€
- λ³µν•© μΈλ±μ¤ μ„¤μ •: `(journey_id, sequence)`

```java
@Entity
@Table(
    name = "journey_routes",
    indexes = {
        @Index(name = "idx_journey_route_sequence", columnList = "journey_id,sequence")
    }
)
public class JourneyRouteEntity extends BaseTimeEntity {
    // μ„λ„, κ²½λ„, μμ„, κ³ λ„, μ„¤λ… ν•„λ“
}
```

### 2. β… JourneyRouteRepository κµ¬ν„
- **νμ΄μ§• μ§€μ›**: `findByJourneyIdWithPaging()` - κΈ΄ κ²½λ΅ ν¨μ¨μ  μ²λ¦¬
- **κµ¬κ°„λ³„ μ΅°ν**: `findByJourneyIdAndSequenceRange()` - νΉμ • κµ¬κ°„λ§ μ΅°ν
- **κµ¬κ°„λ³„ νμ΄μ§•**: `findByJourneyIdAndSequenceRangeWithPaging()`
- **ν†µκ³„ μ΅°ν**: μ΄ κ°μ, μµλ€/μµμ† sequence κ°’

### 3. β… JourneyRouteController API (4κ° μ—”λ“ν¬μΈνΈ)
```
GET /v1/journeys/{journeyId}/routes
- νμ΄μ§• μ§€μ› κ²½λ΅ μ΅°ν (κΈ°λ³Έ 100κ°μ”©)
- κµ¬κ°„λ³„ μ΅°ν μ§€μ› (from, to νλΌλ―Έν„°)

GET /v1/journeys/{journeyId}/routes/all
- μ „μ²΄ κ²½λ΅ λ¦¬μ¤νΈ μ΅°ν (μ§€λ„ λ λ”λ§μ©)

GET /v1/journeys/{journeyId}/routes/statistics
- κ²½λ΅ ν†µκ³„ (μ΄ ν¬μΈνΈ μ, μµλ€/μµμ† sequence)

GET /v1/journeys/{journeyId}/routes?from=1&to=100
- νΉμ • κµ¬κ°„ κ²½λ΅ μ΅°ν
```

### 4. β… Service Layer ν™•μ¥
- `JourneyService` μΈν„°νμ΄μ¤μ— 4κ° λ©”μ„λ“ μ¶”κ°€
- `JourneyServiceImpl`μ—μ„ μ™„μ „ν• κµ¬ν„
- μ—¬μ • μ΅΄μ¬ μ—¬λ¶€ κ²€μ¦ λ΅μ§ ν¬ν•¨

### 5. β… Response DTO
- `JourneyRouteResponse` record ν΄λμ¤ κµ¬ν„
- Entity β†’ Response λ³€ν™ λ©”μ„λ“ ν¬ν•¨

## π― κΈ°μ μ  νΉμ§•

### νμ΄μ§• μ²λ¦¬
- **κΈ°λ³Έ 100κ°μ”© μ΅°ν**: λ©”λ¨λ¦¬ ν¨μ¨μ„±
- **κµ¬κ°„λ³„ λ΅λ”©**: ν„μ¬ μ„μΉ κΈ°μ¤€ ν•„μ”ν• κµ¬κ°„λ§ μ΅°ν
- **μ „μ²΄ μ΅°ν μ§€μ›**: μ§€λ„ λ λ”λ§μ„ μ„ν• μ „μ²΄ λ°μ΄ν„°

### μ„±λ¥ μµμ ν™”
- **λ³µν•© μΈλ±μ¤**: `(journey_id, sequence)` μ΅°ν μ„±λ¥ μµμ ν™”
- **Lazy Loading**: Journey μ—”ν‹°ν‹° μ§€μ—° λ΅λ”©
- **μ •λ ¬ μµμ ν™”**: sequence κΈ°λ° μλ™ μ •λ ¬

### ν™•μ¥μ„±
- **κ³ λ„ μ •λ³΄**: μ¶”ν›„ 3D μ§€λ„ λ λ”λ§ μ§€μ›
- **κµ¬κ°„ μ„¤λ…**: κ²½λ΅λ³„ μƒμ„Έ μ •λ³΄ μ κ³µ
- **μ¶”κ°€ ν•„λ“**: μ†λ„ μ ν•, λ‚μ΄λ„ λ“± ν™•μ¥ κ°€λ¥

## π’» API μ‚¬μ© μμ‹

### νμ΄μ§• μ΅°ν
```http
GET /v1/journeys/1/routes?page=0&size=50
```

### κµ¬κ°„λ³„ μ΅°ν
```http
GET /v1/journeys/1/routes?from=100&to=200&page=0&size=100
```

### ν†µκ³„ μ΅°ν
```http
GET /v1/journeys/1/routes/statistics
```

### μ „μ²΄ κ²½λ΅ μ΅°ν
```http
GET /v1/journeys/1/routes/all
```

## π“ μ‘λ‹µ μμ‹

```json
{
  "content": [
    {
      "id": 1,
      "latitude": 37.5665,
      "longitude": 126.9780,
      "sequence": 1,
      "altitude": 120.5,
      "description": "ν•κ°•λ€κµ μ§„μ…"
    }
  ],
  "pageable": {
    "pageNumber": 0,
    "pageSize": 100
  },
  "totalElements": 1500,
  "totalPages": 15
}
```

## β… κµ¬ν„ μ™„λ£ μ²΄ν¬λ¦¬μ¤νΈ

- [x] JourneyRouteEntity μ—”ν‹°ν‹° μƒμ„±
- [x] Journeyμ™€μ ManyToOne κ΄€κ³„ μ„¤μ •
- [x] μ„λ„, κ²½λ„, μμ„ ν•„λ“ κµ¬ν„
- [x] λ³µν•© μΈλ±μ¤ μ„¤μ •
- [x] JourneyRouteRepository κµ¬ν„
- [x] νμ΄μ§• μ§€μ› λ©”μ„λ“ κµ¬ν„
- [x] κµ¬κ°„λ³„ μ΅°ν λ©”μ„λ“ κµ¬ν„
- [x] ν†µκ³„ μ΅°ν λ©”μ„λ“ κµ¬ν„
- [x] JourneyRouteController 4κ° μ—”λ“ν¬μΈνΈ κµ¬ν„
- [x] Service Layer ν™•μ¥
- [x] Response DTO κµ¬ν„
- [x] μ™„μ „ν• Swagger λ¬Έμ„ν™”

## π”„ ν”„λ΅ νΈμ—”λ“ μ—°λ™ κ°€μ΄λ“

### μ μ§„μ  λ΅λ”© μ „λµ
1. **ν†µκ³„ μ΅°ν**: μ „μ²΄ κ²½λ΅ ν¬μΈνΈ μ ν™•μΈ
2. **κµ¬κ°„λ³„ μ΅°ν**: ν„μ¬ μ„μΉ κΈ°μ¤€ Β±50 ν¬μΈνΈ μ΅°ν
3. **μΊμ‹±**: μ΅°νν• κµ¬κ°„ λ°μ΄ν„° ν΄λΌμ΄μ–ΈνΈ μΊμ‹±
4. **μ „μ²΄ μ΅°ν**: μ „μ²΄ κ²½λ΅ μ‹κ°ν™” ν•„μ”μ‹ μ‚¬μ©

### λ©”λ¨λ¦¬ ν¨μ¨ κ¶μ¥μ‚¬ν•­
- κΈ΄ κ²½λ΅(1000+ ν¬μΈνΈ): κµ¬κ°„λ³„ μ΅°ν μ‚¬μ©
- μ§§μ€ κ²½λ΅(500- ν¬μΈνΈ): μ „μ²΄ μ΅°ν μ‚¬μ©
- μ§€λ„ λ λ”λ§: μ „μ²΄ μ΅°ν ν›„ ν΄λΌμ΄μ–ΈνΈ μΊμ‹±

## π’¬ λ¦¬λ·° μ”κµ¬μ‚¬ν•­

λ‹¤μ μ‚¬ν•­λ“¤μ„ μ¤‘μ μ μΌλ΅ λ¦¬λ·°ν•΄μ£Όμ„Έμ”:

1. **λ°μ΄ν„°λ² μ΄μ¤ μΈλ±μ¤ μ„¤μ •**μ΄ μ μ ν•μ§€
2. **νμ΄μ§• μ²λ¦¬ λ΅μ§**μ΄ ν¨μ¨μ μΈμ§€
3. **API μ„¤κ³„**κ°€ ν”„λ΅ νΈμ—”λ“ μΉν™”μ μΈμ§€
4. **ν™•μ¥μ„±**μ„ κ³ λ ¤ν• ν•„λ“ μ„¤κ³„κ°€ μ μ ν•μ§€
5. **μ„±λ¥ μµμ ν™”** λ¶€λ¶„μ—μ„ κ°μ„ ν•  μ μ΄ μλ”μ§€

## π“ ν–¥ν›„ κ³„ν

1. **μ‹¤μ  κ²½λ΅ λ°μ΄ν„° μ…λ ¥**: κ° μ—¬μ •λ³„ μ‹¤μ  μΆν‘ λ°μ΄ν„° κµ¬μ¶•
2. **μ„±λ¥ ν…μ¤νΈ**: λ€μ©λ‰ κ²½λ΅ λ°μ΄ν„° μ²λ¦¬ μ„±λ¥ κ²€μ¦
3. **ν”„λ΅ νΈμ—”λ“ μ—°λ™**: React Native μ§€λ„ μ»΄ν¬λ„νΈμ™€ μ—°λ™ ν…μ¤νΈ
4. **μ¶”κ°€ ν•„λ“ ν™•μ¥**: κ³ λ„ κ·Έλν”„, λ‚μ΄λ„ μ •λ³΄ λ“± μ¶”κ°€

---

μ΄ PRμ„ ν†µν•΄ Journey Running μ‹μ¤ν…μ΄ μ™„μ „ν• μ§€λ„ κΈ°λ° μ—¬μ • κ²½ν—μ„ μ κ³µν•  μ μκ² λμ—μµλ‹λ‹¤. π—ΊοΈβ¨